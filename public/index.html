<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Secure Line</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/2.1.2/iconify-icon.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body
    class="bg-zinc-900 text-zinc-100 flex items-center justify-center min-h-screen"
  >
    <div
      class="w-full max-w-2xl h-[90vh] flex flex-col rounded-2xl shadow-2xl border border-zinc-800 bg-zinc-950"
    >
      <!-- Terms of Service Modal -->
      <div
        id="tosModal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80"
      >
        <div
          class="bg-zinc-950 border border-zinc-800 rounded-2xl shadow-2xl max-w-2xl w-full mx-4 p-6 flex flex-col"
        >
          <h2 class="text-xl font-semibold mb-4 text-emerald-400">
            üîí Secure Line ‚Äì Terms of Service
          </h2>

          <div
            class="text-sm text-zinc-300 space-y-3 overflow-y-auto max-h-[50vh] pr-2"
          >
            <p>
              By clicking <strong>Accept</strong>, you agree that all material
              distributed through Secure Line is strictly confidential.
            </p>

            <p>
              Confidential material must not be shared, copied, forwarded,
              recorded, or disclosed under any circumstances.
            </p>

            <p>
              You are solely responsible for safeguarding any content accessed
              through this application. In the event that confidential material
              is misplaced, leaked, or accessed by unauthorized parties, you
              accept full responsibility for the consequences thereof.
            </p>

            <p>
              Secure Line is provided ‚Äúas is‚Äù without warranties. We are not
              liable for misuse, loss, or damages arising from use of this
              service.
            </p>

            <p>
              If you do not agree to these terms, you must not use this
              application.
            </p>
          </div>

          <div class="mt-6 flex justify-end gap-3">
            <button
              id="declineTos"
              class="px-4 py-2 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-300"
            >
              Decline
            </button>
            <button
              id="acceptTos"
              class="px-5 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-black font-medium"
            >
              Accept
            </button>
          </div>
        </div>
      </div>

      <!-- Header -->
      <div
        class="flex items-center justify-between px-6 py-4 border-b border-zinc-800"
      >
        <!-- Left: Title -->
        <div class="flex items-center gap-2">
          <h1 class="text-lg font-semibold tracking-wide">üîí Secure Line</h1>
        </div>

        <!-- Center: Status -->
        <div class="flex-1 text-center">
          <span id="status" class="text-sm text-yellow-400"> Connecting‚Ä¶ </span>
        </div>

        <!-- Right: Share & QR -->
        <div class="flex items-center gap-4">
          <button
            id="shareBtn"
            class="text-zinc-400 hover:text-emerald-400 transition text-2xl p-2"
            title="Share invite link"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m9 15l6-6m-4-3l.463-.536a5 5 0 0 1 7.071 7.072L18 13m-5 5l-.397.534a5.07 5.07 0 0 1-7.127 0a4.97 4.97 0 0 1 0-7.071L6 11"
              />
            </svg>
          </button>
          <button
            id="qrBtn"
            class="text-zinc-400 hover:text-emerald-400 transition text-2xl p-2"
            title="Show QR code"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1zm3 12v.01M14 5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1zM7 7v.01M4 15a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1zm13-8v.01M14 14h3m3 0v.01M14 14v3m0 3h3m0-3h3m0 0v3"
              />
            </svg>
          </button>
        </div>
      </div>

      <!-- Chat Log -->
      <div
        id="log"
        class="flex-1 overflow-y-auto px-6 py-4 space-y-2 text-sm"
      ></div>

      <!-- Debug / Logs -->
      <div
        id="debug"
        class="text-xs text-zinc-400 px-6 py-2 overflow-auto h-32 border-t border-zinc-800"
      ></div>

      <!-- Image Thumbnail Preview -->
      <div
        id="imageThumbnailContainer"
        class="hidden border-t border-zinc-800 p-4 bg-zinc-900 flex items-center gap-4"
      >
        <img
          id="imageThumbnail"
          class="h-20 rounded-lg border border-zinc-700"
        />
        <button
          id="clear_image"
          class="px-3 py-1 rounded-lg bg-red-600 hover:bg-red-500 text-white text-sm font-medium transition"
        >
          Clear
        </button>
      </div>
      <!-- Fake Video Thumbnail Preview -->
      <div
        id="videoThumbnailContainer"
        class="hidden relative w-32 h-20 rounded-lg overflow-hidden border border-zinc-700 bg-zinc-800"
      >
        <!-- Dark overlay with heart icon -->
        <div
          id="videoThumbnailOverlay"
          class="absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center"
        >
          <span class="text-2xl text-red-500">‚ù§Ô∏è</span>
        </div>

        <!-- Optional faint background image for style -->
        <img
          id="videoThumbnail"
          class="w-full h-full object-cover opacity-20"
          src="generic-background.jpg"
          alt="video placeholder"
        />

        <!-- Clear button -->
        <button
          id="clear_video"
          class="absolute top-1 right-1 px-2 py-1 rounded bg-red-600 hover:bg-red-500 text-white text-sm font-medium"
        >
          Clear
        </button>
      </div>

      <!-- Input Bar -->
      <div class="border-t border-zinc-800 p-4">
        <div class="flex items-center gap-2">
          <!-- Video Clip Upload -->
          <label class="cursor-pointer">
            <input
              id="videoInput"
              type="file"
              accept="video/*"
              capture="user"
              class="hidden"
            />
            <div
              class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-zinc-700 transition"
              title="Record or upload video"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
              >
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m15 10l4.553-2.276A1 1 0 0 1 21 8.618v6.764a1 1 0 0 1-1.447.894L15 14zM3 8a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                />
              </svg>
            </div>
          </label>
          <!-- Image Upload -->
          <label class="cursor-pointer">
            <input
              id="imageInput"
              type="file"
              accept="image/*"
              capture="environment"
              class="hidden"
            />
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <g
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
              >
                <path
                  d="M5 7h1a2 2 0 0 0 2-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2"
                />
                <path d="M9 13a3 3 0 1 0 6 0a3 3 0 0 0-6 0" />
              </g>
            </svg>
          </label>

          <!-- Text Input -->
          <input
            id="msg"
            placeholder="Type a secure message‚Ä¶"
            class="flex-1 bg-zinc-800 border border-zinc-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          />

          <!-- Send Button -->
          <button
            id="sendBtn"
            class="px-5 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-black font-medium transition"
          >
            Send
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
